import numpy as np
from youtube_transcript_api import YouTubeTranscriptApi
from youtube_url_to_heatmap_coordinates import youtube_url_to_heatmap_coordinates
import pandas as pd
import matplotlib.pyplot as plt
from scipy.ndimage.filters import gaussian_filter1d


# Forecast graph
def forecast_graph(list):
    x = range(len(list))
    y1 = gaussian_filter1d(list, sigma=10)

    plt.title('Raw Forecast Graph')
    plt.plot(x, y1, color='grey', alpha=0.2)
    plt.fill_between(x, y1,
                     facecolor="grey",  # The fill color
                     color='grey',  # The outline color
                     alpha=0.2)  # Transparency of the fill
    plt.savefig(f'forecast.png', dpi=300)
    plt.close()


# Make graph more obvious
# 상위 1프로는 더 크게 표현합니다.
# 소수점 세 자리까지 표현합니다.
def obvious_graph(list):
    if len(list) >= 200:
        threshold_percent = int(len(list) * 0.010)
    else:
        # if short videos or lack of subtitles
        threshold_percent = 10
    threshold_list = sorted(list, reverse=True)
    threshold = threshold_list[threshold_percent]
    list = np.array(list)
    list[list > threshold] = list[list > threshold] * 10
    list = list.round(3)
    x = range(len(list))
    y1 = gaussian_filter1d(list, sigma=10)

    plt.title('More Obvious Forecast Graph')
    plt.plot(x, y1, color='grey', alpha=0.2)
    plt.fill_between(x, y1,
                     facecolor="grey",  # The fill color
                     color='grey',  # The outline color
                     alpha=0.2)  # Transparency of the fill
    plt.savefig(f'obvious-graph.png', dpi=300)
    plt.close()
    # plt.show()

# list = [0.10035873801662112, 0.10082133400798975, 0.22827588613655897, 0.10363338981866674, 0.11062300200535824, 0.10152671082615798, 0.09926502717866209, 0.11804112794694209, 0.10260253612031842, 0.12129980687995257, 0.1031496899708213, 0.1713499374022215, 0.11643845910220478, 0.10032986476673465, 0.10507340330936313, 0.11124275610645654, 0.10153573837974006, 0.10215136191725346, 0.10201761372577212, 0.10178164256373315, 0.2031264444511573, 0.1015746260419961, 0.10107198935748565, 0.18887682416126061, 0.10058639718248065, 0.2155960597460861, 0.20272146609140376, 0.10057379184188539, 0.10024872191378265, 0.10017039381269882, 0.1006429262172889, 0.10031057184700196, 0.1256207799505523, 0.10304193923454663, 0.10201674217007317, 0.10228642931171883, 0.20768103175301478, 0.10098795375351731, 0.1746584611821701, 0.1287056123473953, 0.10052436072955923, 0.09961261173044304, 0.13013950036151106, 0.10105194696767722, 0.10306520332830058, 0.10193689817250132, 0.1178559952731634, 0.12703308678731723, 0.10177626740504511, 0.1005126540748014, 0.1378045309109448, 0.0997854137562787, 0.10072806059186604, 0.11586074993322915, 0.10025506697492166, 0.13968761305192426, 0.09909327305442556, 0.2067904171317812, 0.14375226015017556, 0.14375226015017556, 0.10719503100817908, 0.1006951178212063, 0.10115171126943431, 0.1272169273882504, 0.21886330841159163, 0.14375226015017556, 0.10206535259571008, 0.10331207063221001, 0.09986707886439661, 0.13416937721993036, 0.10544144737683178, 0.12357990850021489, 0.10118974772359529, 0.15100620890651267, 0.10100186812329463, 0.10212260397045558, 0.1384135253686819, 0.10190124238799271, 0.10174017414705337, 0.14522807482596653, 0.10067805296409699, 0.10581823413142837, 0.09971817509930207, 0.10068895249723475, 0.14322872223741015, 0.10228855563632286, 0.10236234961301177, 0.13188231841477938, 0.1502868168283646, 0.10228037929083587, 0.10016712123974364, 0.2055892912930113, 0.10145248954978786, 0.1582288020052916, 0.10080890162202735, 0.1017928642672655, 0.13788968436140056, 0.10176278372621628, 0.10160105079688397, 0.11716843278218021, 0.17309231967764035, 0.1632942769450274, 0.18446276080297197, 0.09995868038573595, 0.14375226015017556, 0.12163582721020276, 0.1619216852397424, 0.10073820726366076, 0.10219245051199441, 0.1005367897242543, 0.0998201199859402, 0.10057619964167626, 0.1011307193247788, 0.10078395545968712, 0.14139610300183625, 0.1015339138779267, 0.10093048533766388, 0.10099633696631027, 0.12291817390107282, 0.14375226015017556, 0.1653651373721966, 0.0992332984816997, 0.1690890710501476, 0.11683050655970119, 0.10047886009604658, 0.10005346291581309, 0.18419383669647132, 0.22680383873484217, 0.10057015640332792, 0.18161245488829342, 0.11473502214058628, 0.120538216414836, 0.101062290332976, 0.12671075700320183, 0.10048775539020352, 0.10275733051673228, 0.14145569201953012, 0.14528830013018965, 0.10056847094347432, 0.10091053112080554, 0.14150489612890066, 0.10409263862919933, 0.10252865397067941, 0.12424009668146309, 0.10096863031237882, 0.10381340507007303, 0.10106853704736299, 0.10055289485271457, 0.15146751706411993, 0.13400021995863728, 0.1090335014515898, 0.10139109404638824, 0.10071183337778256, 0.13575534746442797, 0.10723536674157697, 0.14703305947203932, 0.14375226015017556, 0.10425177723903867, 0.14375225760672508, 0.10221291341894942, 0.10164203426233828, 0.09949349007487435, 0.12442485631583758, 0.10076041667328098, 0.10418115409728561, 0.14375226015017556, 0.10344938643690262, 0.10659739475248359, 0.10178853022764195, 0.15200523810459707, 0.2190231659701009, 0.10239195198537013, 0.1020868023614526, 0.09994037093352348, 0.14375226015017556, 0.10011542136958636, 0.1707896593472248, 0.10172265825139168, 0.09980571049113546, 0.1146627644079893, 0.10053831579454428, 0.11557974952383376, 0.10506367376344766, 0.10825077999985797, 0.1686384665799909, 0.11398464659646745, 0.10287737120574227, 0.14375226015017556, 0.09926423023084399, 0.1000368050107811, 0.15430128631157286, 0.10176106096242227, 0.1893870335456767, 0.10116920342622483, 0.11211454580284635, 0.09895585890298095, 0.10267602149168202, 0.11634893642772712, 0.10129834288543044, 0.09863033793632583, 0.2209507894398524, 0.10010793684263083, 0.10183560101791961, 0.10090506439790009, 0.13302798346794403, 0.14104547945063617, 0.14375226015017556, 0.21886330841159163, 0.10046765874011811, 0.15336659199782998, 0.13191767068086366, 0.17912868053586278, 0.0998364794594488, 0.10223493630886751, 0.12013562211600216, 0.10191520762677969, 0.10039508901092849, 0.1518483284051979, 0.1160521801904045, 0.12733671712347938, 0.10695022220352746, 0.10782911321366666, 0.13570098968851563, 0.10970371082774223, 0.10069985881290716, 0.11786378162290961, 0.10120879647208159, 0.10372494047099641, 0.10057022422867415, 0.10460761613545477, 0.17438802796171604, 0.1041661409568995, 0.11532820227103505, 0.10013816659944172, 0.1646715587730036, 0.1571151208419545, 0.09965595890921317, 0.10160846410722599, 0.10225564677833623, 0.10156918984049645, 0.1041040231135626, 0.12192366780576458, 0.10186509147845668, 0.3113914731960884, 0.2118622676540618, 0.18752776785111447, 0.10591396282508528, 0.10088280411927023, 0.17290251044623967, 0.1176634492890427, 0.10264073535531032, 0.10230636996350792, 0.10089681005326495, 0.10146077780709613, 0.10369174335528833, 0.10092200716938621, 0.1008232500740205, 0.10098788931943839, 0.15043046752039427, 0.17488972526518132, 0.10343837160067626, 0.10490418246180797, 0.211811357949188, 0.09938365710047067, 0.10058668204893478, 0.10058225644509383, 0.1178559952731634, 0.18938619251138356, 0.16366976145297654, 0.17037497518042696, 0.10125597239164591, 0.12773830760718916, 0.10011395973337528, 0.13351164431621537, 0.10447904640915744, 0.11470735957312989, 0.10154609870137538, 0.0999972289212609, 0.14375226015017556, 0.15028207583666373, 0.1012206557338684, 0.10851118863414053, 0.09935588601246031, 0.1017903547294553, 0.1003914162684306, 0.17251965671442357, 0.10222245983643008, 0.10059702541423354, 0.10150061841546659, 0.1786911799225961, 0.10075823269713263, 0.13531349331175066, 0.1601404933012157, 0.10089327635272682, 0.2371924367570051, 0.10062540353909259, 0.10247126694524146, 0.10021226579018863, 0.1092893284837351, 0.10094322293768428, 0.10165454803871612, 0.18684343045534413, 0.15352681242194155, 0.10017124841206121, 0.10732041633447131, 0.10760622895218111, 0.1248751691370055, 0.15768846121081664, 0.10078812671847973, 0.14375226015017556, 0.10169330683281436, 0.10910515553860543, 0.1009166421845001, 0.10099850059485474, 0.14375226015017556, 0.10497005443805822, 0.18331205293531577, 0.10159998254768099, 0.11891648525654316, 0.10074599022213968, 0.10286787565727126, 0.12062369669867887, 0.10154063197846994, 0.09926847948878476, 0.10258074722784477, 0.12047246991547626, 0.09938365370920337, 0.09980779951179908, 0.14375226015017556, 0.13458132039492401, 0.10277146871015214, 0.12828013038547903, 0.10993435770010282, 0.102238822701206, 0.10106440309251079, 0.10343325417830385, 0.10910787533498892, 0.1313960861380694, 0.10061673206857819, 0.1005958757746151, 0.10300624953736491, 0.2535421162856193, 0.10112232593818389, 0.16620739591284162, 0.1430279189412954, 0.10229722710683728, 0.09894362999305722, 0.10035746290011216, 0.14375226015017556, 0.12556472230190027, 0.14375225760672508, 0.10208316014036051, 0.10454638341288607, 0.10059661846215623, 0.10188716862865177, 0.09924974273689109, 0.10086425388707868, 0.15888028480335228, 0.10071920938418413, 0.1022383614888517, 0.10164137974774723, 0.10002316533365598, 0.10188380449147919, 0.19717774785292605, 0.10599811373214221, 0.16895011726334375, 0.10241381548572459, 0.09985693219260187, 0.10333067173341125, 0.15580232396189833, 0.10927648914569538, 0.11564508907111617, 0.102957388157947, 0.10033132640294573, 0.10679650962138583, 0.10259362386982492, 0.10113607752713027, 0.1178559952731634, 0.10077393087351559, 0.17299977538398853, 0.10999286045248612, 0.10031546883699916, 0.1063135456785469, 0.10070240565465778, 0.09859159609856415, 0.11850681338283112, 0.14422105919336456, 0.1013287150754684, 0.16213427022240423, 0.10123671677585364, 0.09988744681586689, 0.10238357555511177, 0.21669072692142682, 0.15888028480335228, 0.15360855298575712, 0.1163258351148041, 0.10345438855618644, 0.10069260150086148, 0.09959229803924972, 0.10519643509614149, 0.19095293766149468, 0.14748367665944842, 0.10244393333071422, 0.10137410718842707, 0.1063043553441339, 0.10247365100616115, 0.23401294730697547, 0.15739492667743957, 0.10107742216771799, 0.10178867944340363, 0.11333785731236529, 0.11317036261987147, 0.14499973613491954, 0.1002190584986127, 0.10111411228875647, 0.10014243620498636, 0.09902660073908989, 0.10106407753084892, 0.13784395269780236, 0.17964299335372524, 0.16443791741160732, 0.10243139242419788, 0.11522344263252873, 0.15780525645700996, 0.10363174166275355, 0.10009938406647231, 0.10673094964172819, 0.13034051773137484, 0.1309684600473957, 0.16351587252493474, 0.18301406227669192, 0.10052881346353865, 0.14375226015017556, 0.10676214251845542, 0.10177772904125618, 0.10048735861192812, 0.6588311907327221, 0.16116213292627982, 0.10261341530585233, 0.1542092142518941, 0.10077812587117937, 0.10071424456884073, 0.18253399108486934, 0.14375226015017556, 0.14921022595560868, 0.10436805701260068, 0.10037355785477049, 0.10567334901809747, 0.12285049777061309, 0.10145976720943743, 0.10037852945264852, 0.10037814963070968, 0.19088100888182685, 0.10320399094300617, 0.11519545111214315, 0.10160614787165251, 0.10218090663806753, 0.10811017127460631, 0.14669965168934387, 0.10022325010500918, 0.10143419366264464, 0.21090136562653897, 0.2257789367106248, 0.10154036406835235, 0.10208791469713063, 0.20583426287849388, 0.1050498713054916, 0.16294932740794715, 0.10728395342834268, 0.10459682851413826, 0.15837389059466117, 0.09901802083279289, 0.10549797980290734, 0.19218299440169534, 0.11842436828323166, 0.1364832567104278, 0.10105282530591078, 0.12239489457243988, 0.1012655900257401, 0.16054590913445232, 0.11649273633551849, 0.10141561290904727, 0.09965727472092986, 0.10789728446915381, 0.10184954930037005, 0.10374453182225248, 0.10033806485109281, 0.10131694398663166, 0.10073606398272017, 0.10431704556970756, 0.2174154475283374, 0.10341897016038962, 0.10022596990139267, 0.12004536014525069, 0.10219972817164397, 0.10334072005845396, 0.10246862853927344, 0.10039606908718138, 0.144426982243348, 0.09981825818018641, 0.10077755274700381, 0.12286925826137793, 0.098652198045413, 0.1027352262363987, 0.0991412527043426, 0.24601605308805866, 0.10296258018820025, 0.10017584357926772, 0.10296258018820025, 0.10277729151612523, 0.10089663370736478, 0.10162038441182439, 0.11268097222547806, 0.22444128523244578, 0.10621686743004288, 0.10079186050378922, 0.09988051506548307, 0.10161779009233143, 0.10142397577423638, 0.10093084481199886, 0.09900711790838779, 0.10405803074628986, 0.10301797314845929, 0.10293094644672257, 0.1288447484148171, 0.14045354476310742, 0.19609711713298583, 0.1048231108254695, 0.20920961836334173, 0.10347062594407186, 0.18440301006421822, 0.1083899474365024, 0.10036829799917102, 0.10688416709884241, 0.11502155370696603, 0.16421187927152248, 0.10124579180717808, 0.10494028250233432, 0.108652177181331, 0.10188927460565195, 0.15790695717240166, 0.12336134471328364, 0.10576691747447722, 0.10343088707372072, 0.10348379423504075, 0.10298200875862537, 0.14375226015017556, 0.14089073719495723, 0.1338385760500719, 0.09995166046240203, 0.10129263199127858, 0.11347626171386474, 0.12865166745827808, 0.13201882964130243, 0.10296258018820025, 0.10122127294451902, 0.18407404356997503, 0.25525120648984534, 0.14375226015017556, 0.10555309467924687, 0.1007402996755917, 0.1000553959381804, 0.10657043417736056, 0.10485063435096614, 0.11627293812728601, 0.1041040231135626, 0.11674916701324514, 0.10213341533064328, 0.13703608160769162, 0.13713039783851347, 0.10372434699921698, 0.10252170187269172, 0.10059209451156326, 0.10414732620585768, 0.11898721691885018, 0.13097591744421277, 0.14766141849003106, 0.10363086332451998, 0.10934916739543896, 0.11459357238104151, 0.14764859356487742, 0.2281451459991825, 0.15709495467088921, 0.10006413184277371, 0.10246354163830684, 0.10903088000195835, 0.10144164427692706, 0.10665050538984228, 0.10263535680535496, 0.15008145185380806, 0.10054039125013865, 0.10093614197153876, 0.15585543883834116, 0.09951371220185026, 0.09963469227190544, 0.10068515427784636, 0.10030670919353465, 0.11613330608701995, 0.10197966205329392, 0.10633422562660982, 0.12299751938234996, 0.21539345187185344, 0.13642308291107696, 0.10245727457631598, 0.1441159892538993, 0.2044996974535679, 0.1009780241228305, 0.1004914247414341, 0.12946557076511842, 0.12138622315357328, 0.16689629117187804, 0.2654106904924723, 0.10619800520125869, 0.10255623514772036, 0.10359217235576797, 0.12480427130260024, 0.10414732620585768, 0.09942126964621778, 0.14682997215739058, 0.1279606662222415, 0.10081444973534827, 0.1018779579466349, 0.10208985450203256, 0.13336062948721972, 0.13678340675851194, 0.10036850825774431, 0.1007098257475344, 0.10211873792572096, 0.09971164012719363, 0.10137786471260773, 0.10116388591908107, 0.10501462925559495, 0.14975612630893173, 0.1003585481056517, 0.10182580025539062, 0.10072445567471436, 0.1024273229034246, 0.1171729296026347, 0.14375225760672508, 0.10391952121550377, 0.10573190942202504, 0.3242402389589296, 0.10034100847111883, 0.09993927216291469, 0.1398428398349203, 0.09987252523969818, 0.10608238333355502, 0.10123902962015979, 0.10038663458152199, 0.21066051782210668, 0.1046120044353553, 0.10962675279865208, 0.10019736117035646, 0.12008051063092995, 0.09969673889862879, 0.10604738884617208, 0.10258510500633951, 0.14375226015017556, 0.12883117656303822, 0.14639223351954947, 0.10266170695236199, 0.11503418617769977, 0.10206264297312853, 0.1632419564729522, 0.10053104152616203, 0.12201623922955489, 0.10312648691987894, 0.11549427941379282, 0.1550281824164635, 0.10328255304153446, 0.09948451339030194, 0.10072754511923476, 0.10937513432923983, 0.1246736430770451, 0.10115941962003239, 0.10083760530854827, 0.10187815464013894, 0.10378517276970836, 0.21604050567480587, 0.10229494817520424, 0.10152144418802389, 0.11916723217025647, 0.14375226015017556, 0.10250203930482213, 0.1012789448364111, 0.15181392484614392, 0.1012709210979531, 0.10020186477334557, 0.17841644657519157, 0.10418681073116048, 0.10347642161990647, 0.10242647508659683, 0.10496981704934644, 0.10041996056538788, 0.18219291437505836, 0.1026708057225576, 0.10071997581059644, 0.11192766323513514, 0.11178618973671918, 0.10047640820978067, 0.0986083998280905, 0.10092278037833313, 0.10093351034810537, 0.10076736198873404, 0.10735080887211315, 0.12855826178272925, 0.1782815894392995, 0.25244785606235587, 0.10490087258491237, 0.15494026211579032, 0.10157807496085147, 0.1023914839904812, 0.09997806826095335, 0.10366932707836216, 0.23431462766443376, 0.14139610300183625, 0.10094509491723999, 0.10286157807387461, 0.11800916864380256, 0.16337383946741244, 0.13102239815397831, 0.10635443079724918, 0.17092480134957097, 0.09981279823981559, 0.23706040793805047, 0.10455814432792086, 0.10080975622138974, 0.10109641326465998, 0.1041040231135626, 0.1842471813312745, 0.13456571802184258, 0.1004970338975666, 0.10256007406231649, 0.1974775528395613, 0.10009877702962362, 0.10284011474306284, 0.10122376891725997, 0.10202641406444435, 0.11808703553253207, 0.09953275755906925, 0.11653001314580178, 0.09985421917875302, 0.10091644888226337, 0.26227903147659803, 0.14375226015017556, 0.10098708898035298, 0.10683535997970146, 0.17196338374612122, 0.10196886764944278, 0.10073033274096446, 0.10377684381719236, 0.10108706693195069, 0.10179286087599818, 0.10110519325572837, 0.10419659114608561, 0.16212958349098033, 0.13107670760433146, 0.10018311784764997, 0.10216916607063659, 0.1018742546827312, 0.11885647339020644, 0.11494160797137483, 0.14139610300183625, 0.1783650926143, 0.14042107973723011, 0.10153218433159805, 0.10103634374677899, 0.09909149603035457, 0.10213088544522922, 0.11632307801448019, 0.10507340330936313, 0.10854962864911152, 0.1014338104494385, 0.1634599878309156, 0.10013184527717388, 0.10133253025119335, 0.15141169341291236, 0.09938390466298438, 0.10218901176694098, 0.16594079143318174, 0.10315043265836243, 0.09947957909636433, 0.15255754922486325, 0.10091472950973665, 0.21302566903526338, 0.10197950605499762, 0.2219494769677552, 0.10014289063480604, 0.10717033240835254, 0.1015122572448782, 0.17801589721054628, 0.10076881684241049, 0.1560178474776852, 0.10164111183762967, 0.11822222501262061, 0.10125372059015135, 0.09915309840106018, 0.11365097302319652, 0.10047326111371599, 0.09996558161471397, 0.18150825480889343, 0.0994897393332283, 0.1172735824164273, 0.10595488524772799, 0.09867926374982265, 0.15615716243445768, 0.14375226015017556, 0.21058949111954361, 0.22024403576715587, 0.09960369608868225, 0.11346004467358319, 0.10056179353813882, 0.10303379001919813, 0.10089899402941328, 0.10236388246583639, 0.10088340437358428, 0.12280439688278638, 0.14375226015017556, 0.10248841997530087, 0.17468270535217695, 0.09884982075669838, 0.14375226015017556, 0.1671001843364216, 0.10160232591339294, 0.09980611744321277, 0.1274056717617154, 0.10057996055712423, 0.12106597560758688, 0.10015309495814506, 0.1219495601316846, 0.1287950171753339, 0.15931047723556363, 0.10157960781367607, 0.11091000834916151, 0.18552625205792206, 0.13028951646228362, 0.10019333912732553, 0.16313898742358612, 0.10347062594407186, 0.10381861066539552, 0.10134256840243411, 0.12455641035736865, 0.10003852777457513, 0.10209844458213152, 0.10101465659232468, 0.16204162758200039, 0.10158959170463987, 0.1236074828947212, 0.10261443268604564, 0.10516843340195398, 0.1016221037843511, 0.10040936963757541, 0.10172413684393931, 0.10484944740740729, 0.10118241580366877, 0.10195792402982995, 0.14519759920227557, 0.10017038024762959, 0.1003037180957663, 0.11180636777722006, 0.09898471519653085, 0.13891681529605815, 0.10182437253185266, 0.13383260826742124, 0.09788813534642667, 0.17405666384148394, 0.10042906611811811, 0.10055741202077292, 0.10163344079097203, 0.11483011666725604, 0.10132814534256013, 0.10060578505769804, 0.10727332180532248, 0.10486448428666456, 0.10084945778780047, 0.09997848877809992, 0.10092737893680695, 0.14375226015017556, 0.1026587395934648, 0.12413401444870546, 0.10107793764034928, 0.10058287365574445, 0.10841443916902296, 0.19645290855165956, 0.14375226015017556, 0.09999626919261187, 0.10106332127823855, 0.12185502516412118, 0.10041161465653534, 0.09997857016851538, 0.09928110517698388, 0.10223081252781725, 0.10210173411142326, 0.19142209575511024, 0.10558923202371365, 0.10143463113612777, 0.10228328899818878, 0.10166916100955953, 0.10725817640551122, 0.1386835228112865, 0.10381861066539552, 0.10260671416164566, 0.10545656564650452, 0.09944499495232603, 0.10083603854305055, 0.10105350695064032, 0.11120115543035161, 0.10099700843723787, 0.14375226015017556, 0.10028180033513484, 0.103854842965347, 0.10281601639755036, 0.13118436931983923, 0.09936475756774607, 0.10056036920586817, 0.10166426741082965, 0.16704065742131036, 0.09973289319943213, 0.10269499224102016, 0.18758086831467125, 0.10179494650539449, 0.1178559952731634, 0.10106552899325807, 0.10051252859791089, 0.1010844997425962, 0.1391547673821152, 0.10111195205147933, 0.10577896664723346, 0.10072054554350471, 0.10144164427692706, 0.10191567223040132, 0.12592140223260953, 0.10414732620585768, 0.10091032764476687, 0.21350412259257856, 0.10136364512877241, 0.10084287872921699, 0.11495996490132966, 0.10356733132271437, 0.10044278718565872, 0.10051769349802565, 0.10244818937118963, 0.10663522094807126, 0.10144281426414939, 0.10142758408265537, 0.1854710388348305, 0.10152561205554919, 0.10098970025618251, 0.10064744338534724, 0.1378506377334893, 0.10066556631785761, 0.10310765182123326, 0.10238508127779788, 0.12957343002194704, 0.10000703985759182, 0.10034417591478736, 0.10524733462721336, 0.1655281759394437, 0.15802082575490553, 0.12483672233949988, 0.10803690294435062, 0.10350446400930172, 0.10402235800544468, 0.12796763527656574, 0.09982461341512736, 0.11408453976638237, 0.10642045538052843, 0.19698315354334944, 0.10109362564293028, 0.1178559952731634, 0.14854205897019435, 0.10126036069154642, 0.12602325894629757, 0.1016060834375736, 0.10065780709824988, 0.16728970531010082, 0.17663732330972456, 0.10138208005787541, 0.12199310400395877, 0.10818368716737572, 0.10120055569251568, 0.16290522058529935, 0.11249419139578617, 0.19672536974996568, 0.10153436152521175, 0.10235563829500316, 0.112883485144226, 0.10284272941015968, 0.10029080414984573, 0.1012625853629025, 0.14490265559733073, 0.10178578330111998, 0.10187449207144297, 0.09990177831152348, 0.14375226015017556, 0.10163734753091438, 0.09985213354935671, 0.1000278893690203, 0.12416719460807699, 0.10330267003922373, 0.15905332760916702, 0.09992168505063947, 0.1300180556878343, 0.10024165112143907, 0.1011850033406271, 0.10224573071271865, 0.211811357949188, 0.14375226015017556, 0.10488982722728021, 0.17815848304464027, 0.11520359015368972, 0.1003778444166517, 0.18341020977636743, 0.21886330841159163, 0.10278682775980397, 0.21562786983346394, 0.10029878719309598, 0.10273016985683789, 0.10083696096775915, 0.1011449965601584, 0.10102637002961712, 0.09958705513998681, 0.1005541564041543, 0.13929109632802028, 0.10301468701043485, 0.10107795798795313, 0.10043365111152268, 0.10212953572083941, 0.10210366035125594, 0.1008286727104509, 0.10138663792114148, 0.09996594787158358, 0.11751532551542972, 0.1008187769924372, 0.10525089545788999, 0.1364975678584805, 0.16870059459712974, 0.24036533358338202, 0.10116731449033256, 0.1011286709993229, 0.10065464643711597, 0.1012832924411039, 0.09973473126631473, 0.10121626065143326, 0.10150943910174269, 0.10216823008085874, 0.10182255142130661, 0.14139610300183625, 0.16398264655763062, 0.10055741202077292, 0.10413773570190196, 0.15694865709472325, 0.09995169437507515, 0.1001633128465533, 0.17934860761225307, 0.1057116839037818, 0.09957214712888734, 0.14388045959247336, 0.09958385717491247, 0.16029210668889174, 0.15915926062616295, 0.1717168623514775, 0.11337303492818303, 0.14008042947928348, 0.11292617780840508, 0.10816278000440296, 0.10101980453610289, 0.10088319072374369, 0.16831836824976618, 0.14375226015017556, 0.10882794317479652, 0.10513544993608648, 0.18890804077685902, 0.10216480490087457, 0.13713039783851347, 0.10135557391257208, 0.1655551365145667, 0.10037087536232744, 0.14628495438138525, 0.10869634165552308, 0.211811357949188, 0.1008433738542444, 0.16078105960980202, 0.10880058582139811, 0.10219474979123132, 0.12162357795267517, 0.17832981326046293, 0.1663018630550588, 0.23403551958219795, 0.10149333736454973, 0.10058245992113249, 0.14375226015017556, 0.1518224572746986, 0.10041663712342304, 0.10227954503907735, 0.1164905082728951, 0.10969095288011799, 0.10151672015265956, 0.12657476040149324, 0.1008161114563307, 0.2894046663621803, 0.10124611058630531, 0.10144216653209297, 0.11263561402519248, 0.18369091514550676, 0.303448677506274, 0.1160006600574147, 0.14375226015017556, 0.1020606387341477, 0.12344785255112176, 0.184253041441188, 0.1441285844206926, 0.1957295037564657, 0.10099647261700272, 0.14375226015017556, 0.10109260826273697, 0.09881844475153634, 0.39039865521134337, 0.15175529152996917, 0.10096469644229797, 0.10771820520752537, 0.10078375198364845, 0.10108878291321008, 0.10254820123546043, 0.1154047363917113, 0.10578740751157073, 0.10039606230464676, 0.18495423004422706, 0.2493260927644953, 0.11415462369663297, 0.14375226015017556, 0.22515404823081753, 0.15174431399768323, 0.13722652500607946, 0.12147773989322985, 0.31646665394286844, 0.10147301010828716, 0.14375226015017556, 0.21906251823597858, 0.10150428776669718, 0.10210806899876033, 0.16472099666786438, 0.10414732620585768, 0.1040890438858496, 0.1854883478631862, 0.1378228836018155, 0.10037615556553078, 0.09950418613197347, 0.10079728653148694, 0.12221372968141514, 0.10067936877581368, 0.10060177657973636, 0.1250025281808728, 0.10167823604088397, 0.10288858951800728, 0.1442200469000722, 0.10179286087599818, 0.10100830813991836, 0.13297515091450485, 0.12143764154854375, 0.1757599753262119, 0.09921507381117001, 0.14375226015017556, 0.10498004850282394, 0.21886330841159163, 0.10235867008797928, 0.10443591288022791, 0.130060297313461, 0.10017028190087757, 0.14832705813348182, 0.10155517712396711, 0.10178189690878148, 0.17315377283258426, 0.1010153043243811, 0.22127007047465513, 0.10013142815129461, 0.10327732370734079, 0.10960425174004312, 0.10020776218719953, 0.10172187147737552, 0.10059923652052036, 0.14720516798370986, 0.11494180127361156, 0.10567674367667584, 0.10055411570894657, 0.10208747044111288, 0.1303709272253532, 0.10130318561515064, 0.14375226015017556, 0.11152378703725771, 0.1000691814397999, 0.12717797190064814, 0.15743992201212284, 0.15730544808943694, 0.2538020772726168, 0.10105105506437441, 0.10573327271148408, 0.1284602270273008, 0.1099829308217993, 0.16788324830615187, 0.10002797415070308, 0.1409797872115534, 0.18147146973237024, 0.10097636240184807, 0.10343895828992107, 0.10245088881996924, 0.1373389099091347, 0.09911915859781098, 0.10701123449372094, 0.1631017377434413, 0.10276918299598446, 0.10044018269236381, 0.10043411910641162, 0.14819975504552516, 0.1017280232362778, 0.10106819792063187, 0.1019797773563825, 0.10217843101293045, 0.10117894314594222, 0.2880272556660463, 0.1576813734621365, 0.1346219587989294, 0.09887723576164106, 0.1000668516391572, 0.10356102695678308, 0.16949638260181113, 0.10437917358684638, 0.1011167540859918, 0.1381890391573003, 0.10053184864778206, 0.10149664385017802, 0.09974736034578116, 0.10693604670616717, 0.12984312903302828, 0.2625996690183252, 0.09984654813209537, 0.14927379017445375, 0.10073752901019856, 0.10092290924649096, 0.10260940682789065, 0.10132555441433447, 0.11169578872400794, 0.1007236044666193, 0.10200168494321202, 0.10162447428020155, 0.11806013600022065, 0.17756982347351719, 0.10822929293017503, 0.15400985521174546, 0.1524419188789913, 0.09901511112544, 0.10243172476839438, 0.10141718306581231, 0.099573975021968, 0.1030899901010772, 0.1018736985148922, 0.11383185643903443, 0.1749713869820319, 0.1021105717540359, 0.10169970276296304, 0.17665459164287256, 0.10066962905609628, 0.17221989242299604, 0.10239185024735079, 0.1042933541762724, 0.10113499910412536, 0.11190170308386889, 0.10056411994751421, 0.17159318283264274, 0.1046058187637799, 0.10028385883439266, 0.17420337345662817, 0.10050823525349507, 0.10233477860977278, 0.15372570346720127, 0.14375226015017556, 0.14375226015017556, 0.10092798258238832, 0.10043513987787224, 0.10127998934674291, 0.0992246914452642, 0.10193206222531573, 0.13919383223808826, 0.11148879933240939, 0.10002492201012311, 0.10012622255597212, 0.1576881085190163, 0.10116835560939706, 0.10922179478650243, 0.14062816577994702, 0.1048278925123781, 0.20133262682443143, 0.16381831252627072, 0.10206561033202571, 0.10068816572321859, 0.11591699410158326, 0.10054190036409208, 0.10182460992056443, 0.10159719492595129, 0.10024550360110443, 0.21339082035171567, 0.14614304298557773, 0.21587889143982944, 0.20697897159427678, 0.10064308899811983, 0.10081262523353492, 0.1242075405152768, 0.14375226015017556, 0.10843710639973017, 0.1008263429098082, 0.16185704429352607, 0.10133698298517277, 0.1308429136359062, 0.1154621064608127, 0.10181457516059098, 0.10284268532368462, 0.10059765958122072, 0.13682327449702092, 0.10146258874384023, 0.10347757125952493, 0.15197107871678947, 0.10108596816134188, 0.15708114882166585, 0.14139610300183625, 0.10187697108784738, 0.10133603682159299, 0.10096101691726547, 0.10296258018820025, 0.10193656582830482, 0.11329284502134543, 0.0998855205760342, 0.10012309919877863, 0.14375226015017556, 0.13443903299235338, 0.10778687497930725, 0.10187622161777163, 0.1432306529282812, 0.15998381336017686, 0.1020036044005101, 0.10032748070581496, 0.11257278062445294, 0.09859136549238699, 0.10003641840630764, 0.14375225760672508, 0.37119469520276205, 0.10391326432731483, 0.10135754763014712, 0.10101656926708813, 0.10078022167437763, 0.10175295583354879, 0.12674311986715137, 0.10092118987396424, 0.14854408313287065, 0.14375226015017556, 0.10124911864041022, 0.10199110418920149, 0.10092591390932856, 0.10210467094891465, 0.10007569945557178, 0.1951095393967941, 0.17901894590821113, 0.10470158137010993, 0.10129603004112428, 0.09887143330327183, 0.10070978844359399, 0.17009020029051436, 0.10043600465103657, 0.1027814458185813, 0.13880309762494966, 0.10066408433404267, 0.11014865527275675, 0.2798088313342573, 0.10071853791325655, 0.175252329739883, 0.10009269987860218, 0.1002333628641308, 0.10136759595518982, 0.10108687702098126, 0.10174610547358043, 0.1521894831141571, 0.10007459390242837, 0.10092370280304175, 0.1108961278920573, 0.1023859121382891, 0.09977985546915584, 0.14422105919336456, 0.10014234803203627, 0.10044651757970088, 0.10100300419784383, 0.11337884077781958, 0.09943370881471478, 0.10023139592909039, 0.10220419786195997, 0.10062661083025534, 0.10078652264904159, 0.10093542980540343, 0.10064137301686044, 0.1978876587954892, 0.11438647786015631, 0.10885191604341848, 0.17284522176755374, 0.10100444209518374, 0.18408374937701932, 0.14401454245964748, 0.10105673204585314, 0.0996497528900339, 0.14375225760672508, 0.20215163822765905, 0.10161735601011561, 0.20104750941652041, 0.10085022760548007, 0.10082622421545231, 0.10248753146326536, 0.15540300986637112, 0.10112959681529882, 0.10108279393513872, 0.10041242516942268, 0.11529098650356334, 0.10126616654118298, 0.1014751974757028, 0.09975595381714741, 0.11263561402519248, 0.099256915267254, 0.18308556714794588, 0.10458627828153351, 0.10067868373981684, 0.10646205605663334, 0.13867720699982805, 0.10025073293529811, 0.10174599695302648, 0.10147068369891177, 0.10965109192414366, 0.20559919379355962, 0.1368340553358028, 0.1011217189013352, 0.1015917485506497, 0.10014443705269989, 0.10236513045220685, 0.10125477866555241, 0.10124261079844028, 0.16211647963409034, 0.10250030636722617, 0.19811945191620092, 0.09941383937953921, 0.10515417312291092, 0.10066717377856306, 0.10073428695864917, 0.09996532048713103, 0.1793129314801406, 0.12371146593301327, 0.1017573983937263, 0.10178478965979783, 0.10010377575764015, 0.10407389848603835, 0.10154158831585165, 0.1329393052190268, 0.10081956715772067, 0.10064825728950191, 0.1344589990786473, 0.10443596035797027, 0.11998396803311837, 0.10022486434824926, 0.09967209455907924, 0.13869987931743621, 0.15225439705739197, 0.10153245563298294, 0.10170989691250013, 0.10219917539507227, 0.102697606908117, 0.10052580540943373, 0.09881261516302861, 0.14375225760672508, 0.11283072380740035, 0.10061187577378873, 0.09951555366000017, 0.09929377495165803, 0.1077369283943498, 0.10078435562922983, 0.15699915815188606, 0.160211075747761, 0.10037995039365186, 0.10439891754513145, 0.10027841585035838, 0.10466863181691557, 0.10098224964190008, 0.12827437540485215, 0.1008948024230168, 0.21220320532191306, 0.15655987712328107, 0.10279607574576126, 0.10154054041425253, 0.0987810933333722, 0.10296258018820025, 0.10572044693851362, 0.17550844163848242, 0.14851676986594728, 0.1956047831185664, 0.1012162131736909, 0.10421907524835801, 0.09997429717170343, 0.10078032341239695, 0.11165608715759723, 0.1145960513974459, 0.15775530139388422, 0.14375226015017556, 0.10009021747093047, 0.10204385196095789, 0.1000569559211435, 0.1005712483914021, 0.10040344170231566, 0.11240921641077266, 0.10021093302213538, 0.10157966546522036, 0.10072227848110066, 0.14375226015017556, 0.09983393600896551, 0.14375226015017556, 0.1178559952731634, 0.10029295082205364, 0.11036597446458482, 0.1078383137218816, 0.10122575959117157, 0.20680281560507047, 0.10058400633902634, 0.10107470237133451, 0.1055716652590423, 0.10027082958538353, 0.10332858271274763, 0.14375226015017556, 0.1009374442181862, 0.09954471177634078, 0.13675995784068956, 0.10059065322295604, 0.13443845562909368, 0.11511885594865529, 0.10265874298473211, 0.10178436914265125, 0.14422105919336456, 0.11085669762703147, 0.13272769268226645, 0.10240538479518928, 0.19017552354310469, 0.10204503212198214, 0.10016400466508477, 0.10062079480681685, 0.10174844205675776, 0.10080301777324265, 0.10098713645809534, 0.13678391714424226, 0.10158610548184409, 0.10111022250515067, 0.10013770538708741, 0.12135062841187629, 0.10210105585796103, 0.10263048694549626, 0.1022575967570401, 0.09922354519691307, 0.11181708079065572, 0.10382725839703874, 0.10241325931788559, 0.1006108583935954, 0.12759557255733348, 0.12345223067722036, 0.101300998247735, 0.1795316071788931, 0.13352402752880174, 0.19024106995769305, 0.13407748150615179, 0.10100787405770253, 0.10229979090492444, 0.5210451936099835, 0.10038150698534765, 0.14914287708244447, 0.1041445182365241, 0.11092122666142654, 0.10125737298504538, 0.10780984064153784, 0.13713039783851347, 0.10093542980540343, 0.18252105340007763, 0.10155790709415252, 0.23806209334625628, 0.23842727857538168, 0.10182342636827287, 0.15882228056726372, 0.10257469720696183, 0.19677011752213525, 0.20349099890456285, 0.15563440366535697, 0.16315085685917488, 0.125959007995822, 0.10052829459964006, 0.1826493348686535, 0.17805076622103871, 0.1028015695988052, 0.09988089488742191, 0.10077812587117937, 0.10033531114203623, 0.10077812247991208, 0.10074763498678554, 0.10325874973627805, 0.09955903309819543, 0.18420166035015798, 0.14375226015017556, 0.10215068366379126, 0.1496184217802236, 0.14375226015017556, 0.10061883126304375, 0.0999945972978275, 0.1078578881168011, 0.10221509061256312, 0.09989359518350187, 0.10090386388927197, 0.10245907194799085, 0.10583803574125772, 0.10296258018820025, 0.10785062402222079, 0.10175223349361154, 0.17597943440771327, 0.10351538049877607, 0.10203200287297301, 0.10209533139873994, 0.10319170777280548, 0.11009642975616624, 0.10018996820761833, 0.12141604934957416, 0.10246847593224445, 0.10376865051536882, 0.16293781405542607, 0.1024143682622963, 0.10000075244799711, 0.12374410009834771, 0.10104208516233662, 0.19002876305895075, 0.09982915093078958, 0.10259409864724847, 0.21107583954715897, 0.10173613514768588, 0.1029920977788758, 0.1055769352884437, 0.10022830987583731, 0.1816283192367746, 0.10236315673463181, 0.14034275926649775, 0.17527594313417, 0.10193550775290378, 0.10309152295390181, 0.11051726907313364, 0.09990210387318535, 0.10170858449205074, 0.10081307288081998, 0.14139610300183625, 0.10059193173073232, 0.2410788155304237, 0.10093219453638867, 0.1000103395606855, 0.17628468576965012, 0.1016695170926272, 0.11502059058704968, 0.12632315549715023, 0.18588129061525274, 0.1898141534897042, 0.10369481245220485, 0.10186824535705599, 0.14139610300183625, 0.10044122042016099, 0.10188551029893665, 0.10116702284134381, 0.18988070032814935, 0.1013970558943211, 0.14375226015017556, 0.12983093912267862, 0.10086387067387251, 0.10188677524164368, 0.10088976639105986, 0.17862191667903476, 0.10069354427317395, 0.15857561334812564, 0.14375226015017556, 0.10063810044390525, 0.10166499992456884, 0.10070757055477254, 0.1322789491700467, 0.1227975431315507, 0.10120687701478352, 0.10006271429303769, 0.09985890591017692, 0.13077961817499553, 0.19243358531711233, 0.09995326453184017, 0.10500580856931885, 0.11572147058476344, 0.14187026130714778, 0.17789286881503524, 0.1180053839894834, 0.12943759450543574, 0.10567759488477092, 0.14375226015017556, 0.101319836737648, 0.1178559952731634, 0.333160967620703, 0.14375226015017556, 0.10115743233738811, 0.19170734542244638, 0.10126679392563553, 0.10338283281592284, 0.10076995969949432, 0.10287956535569254, 0.10047934843853937, 0.14139610300183625, 0.20037254548359787, 0.10189296430448638, 0.1139448704221759, 0.1582658380355958, 0.14419840722336025, 0.10126474899144695, 0.10713550070180053, 0.19871927214804475, 0.10676214251845542, 0.10748508610129501, 0.102526992249697, 0.11004062984382987, 0.14139610300183625, 0.14375226015017556, 0.1926087849689369, 0.19703053972148704, 0.10022157821022483, 0.10100661589753013, 0.16533349684818432, 0.14711939605087823, 0.10016721619522836, 0.09981835991820576, 0.23479199601620943, 0.13328176810935122, 0.1547120722165966, 0.11381549696552583, 0.10066797072638116, 0.16197565725899812, 0.10116246158681041, 0.127479157133079, 0.10046705509453674, 0.10150791642272003, 0.31757437749735684, 0.10322438941588227, 0.10094496265781486, 0.11319549530191382, 0.14822443626510673, 0.14291122394944197, 0.14375226015017556, 0.10457704725191277, 0.09930356893165242, 0.10029388342056418, 0.10179969427962998, 0.33899584650544, 0.1729688063309038, 0.1951095393967941, 0.10168352980915654, 0.10137762732389596, 0.28966552264374795, 0.10123776806872006, 0.20408480302819682, 0.10083273883995689, 0.10480478102565316, 0.10652127436641927, 0.14360448864445452, 0.10258881844404513, 0.1769594767479398, 0.14375226015017556, 0.09950815052346011, 0.10003691014006774, 0.14375226015017556, 0.0998174544498337, 0.10405882430284064, 0.09935884319755557, 0.10005464307683734, 0.10062185966475252, 0.10090745863262171, 0.09992054219355564, 0.10078781811315443, 0.14598916041616214, 0.16753792912093468, 0.10025519245181216, 0.10232959336205413, 0.13034471951157325, 0.13139229215776516, 0.16782263618550108, 0.10174139161201805, 0.13156947739660035, 0.1758762177958335, 0.10405882430284064, 0.10187681848081837, 0.10165912624958608, 0.10149901095476115, 0.09998044893060572, 0.09880243796982807, 0.10093832594768709, 0.10195792402982995, 0.1019792551012166, 0.10949383546766195, 0.303920511309798, 0.29872363832682747, 0.10424462844754692, 0.09998280925265422, 0.09969537900043705, 0.17303265032930204, 0.23881932264161077, 0.10931385752019608, 0.099927545160553, 0.09925155706490252, 0.0999007711051321, 0.10425756274107137, 0.10138258196543745, 0.1267545179165839, 0.1004419258037617, 0.10464505911783631, 0.16839990448972628, 0.11886495494975144, 0.1569686969410812, 0.10568719556252856, 0.10078778759174863, 0.10076216656721348, 0.10126356543915539, 0.09978864224275882, 0.13218663972165617, 0.10259851068602018, 0.10002492879265773, 0.10531347451358118, 0.09984502884434002, 0.20030546621618486, 0.10058579692816659, 0.1340495145724542, 0.1764999498534877, 0.13736492940757888, 0.13082265929189082, 0.10892444168613306, 0.09975698476240998, 0.13713039783851347, 0.10151607920313777, 0.12004627239615737, 0.10502468097190495, 0.10280171542329958, 0.10332069801624938, 0.14135846459767593, 0.10092337724137988, 0.09990287029959766, 0.19456432535119314, 0.10128067438273974, 0.10140297026451162, 0.11033848485176127, 0.10457534483572262, 0.10049038701363691, 0.10070568161888027, 0.09919533663541957, 0.1284516199908653, 0.11033315377954828, 0.10172135261347692, 0.10109725429895314, 0.10028138320925557, 0.11267334526529546, 0.10536210867808926, 0.11638207589189091, 0.1017663411656256, 0.10287825293524314, 0.126090724818184, 0.10221958065048298, 0.10110195120417897, 0.1636601031236746, 0.10108481513045613, 0.10017805807682184, 0.10002513226869639, 0.10534402644078662, 0.11210214054702246, 0.10182646494378358, 0.10198853360857968, 0.1194781435573355, 0.10296818256179813, 0.10171302026969362]
# obvious_graph(list)

# Target graph
def target_graph(list):
    x = range(len(list))
    y1 = gaussian_filter1d(list, sigma=10)

    plt.title('Target Graph')
    plt.plot(x, y1, color='grey', alpha=0.2)
    plt.fill_between(x, y1,
                     facecolor="grey",  # The fill color
                     color='grey',  # The outline color
                     alpha=0.2)  # Transparency of the fill
    plt.savefig(f'target.png', dpi=300)
    plt.close()
    # plt.show()

# Compare forecast to target
def comparison_graph(list, target):
    # raw
    x = range(len(list))
    y0 = gaussian_filter1d(list, sigma=10)

    plt.title('Graph Comparison')
    plt.plot(x, y0, label='Forecast Raw', color='green', alpha=0.2)
    plt.fill_between(x, y0,
                     facecolor="green",  # The fill color
                     color='green',  # The outline color
                     alpha=0.2)  # Transparency of the fill

    # obvious
    if len(list) >= 200:
        threshold_percent = int(len(list) * 0.010)
    else:
        # if short videos or lack of subtitles
        threshold_percent = 10
    threshold_list = sorted(list, reverse=True)
    threshold = threshold_list[threshold_percent]
    list = np.array(list)
    list[list > threshold] = list[list > threshold] * 10
    list = list.round(3)
    y1 = gaussian_filter1d(list, sigma=10)

    plt.plot(x, y1, label='Forecast in Obvious way', color='blue', alpha=0.2)
    plt.fill_between(x, y1,
                     facecolor="blue",  # The fill color
                     color='blue',  # The outline color
                     alpha=0.2)  # Transparency of the fill

    # target
    y2 = gaussian_filter1d(target, sigma=10)
    plt.plot(x, y2, label='Target', color='red', alpha=0.2)
    plt.fill_between(x, y2,
                     facecolor="red",  # The fill color
                     color='red',  # The outline color
                     alpha=0.2)  # Transparency of the fill

    plt.legend()
    plt.savefig(f'comparison-graph.png', dpi=300)
    plt.close()
